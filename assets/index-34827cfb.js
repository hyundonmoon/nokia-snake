(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const g of c.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}})();let i={x:0,y:0};function k(e){switch(e.key){case"ArrowUp":{if(i.y!==0)return;i={x:0,y:-1};break}case"ArrowDown":{if(i.y!==0)return;i={x:0,y:1};break}case"ArrowLeft":{if(i.x!==0)return;i={x:-1,y:0};break}case"ArrowRight":{if(i.x!==0)return;i={x:1,y:0};break}}}function w(){return i}function H(){return i.x===0&&i.y===-1?"up":i.x===0&&i.y===1?"down":i.x===-1&&i.y===0?"left":i.x===1&&i.y===0?"right":"up"}function P(){i={x:0,y:0}}const a=21;function p(){return{x:Math.floor(Math.random()*a)+1,y:Math.floor(Math.random()*a)+1}}function z(e){return e.x<1||e.x>a||e.y<1||e.y>a}function S(e,t){return e.x===t.x&&e.y===t.y}let s=[{x:11,y:11}];function q(){return s[0]}function R(){s.push(Object.assign({},s[s.length-1]))}function v(){return s.slice(2).some(e=>S(e,s[0]))}function $(e){return s.some(t=>S(t,e))}function B(e){e.replaceChildren(),s.forEach((t,n)=>{const o=document.createElement("div");o.style.gridRowStart=t.y.toString(),o.style.gridColumnStart=t.x.toString(),o.classList.add("snake");const r=H();o.classList.add(r),n===0&&o.classList.add("head"),e.appendChild(o)})}function W(e){s=[K(s[0],e),...s.slice(0,s.length-1)]}function K(e,t){let n=e.x+w().x,o=e.y+w().y;return t==="difficult"?{x:n,y:o}:(n<1?n=a:n>a&&(n=1),o<1?o=a:o>a&&(o=1),{x:n,y:o})}function _(){s=[{x:11,y:11}]}let u=p();function N(){let e=p();for(;$(e);)e=p();return e}function j(e){return S(q(),e)}function U(e){j(u)&&(e.push("score!"),R(),u=N())}function X(e){const t=document.createElement("div");t.style.gridRowStart=u.y.toString(),t.style.gridColumnStart=u.x.toString(),t.classList.add("food"),t.innerText="🍎";const n=Math.floor(e.clientWidth/21);t.style.fontSize=`${Number.isNaN(n)?16:n}px`,t.style.lineHeight=`${Number.isNaN(n)?16:n}px`,e.appendChild(t)}function Y(){u=N()}function b(){const e=document.querySelector("#gameboard"),t=document.querySelector(".food");if(!e||!t)return;const n=Math.floor(e.clientWidth/21);t.style.fontSize=`${Number.isNaN(n)?16:n}px`,t.style.lineHeight=`${Number.isNaN(n)?16:n}px`}function Z(e,t){W(t),U(e)}function J(e){B(e),X(e)}const h=document.querySelector(".initial-screen"),T=document.querySelector(".game-screen"),E=document.querySelector(".game-menu"),M=document.querySelector("#gameboard"),Q=document.querySelector("#scoreboard"),d=document.querySelector(".gameover-screen"),A=document.querySelector(".main-menu-button"),F=document.querySelector(".play-again-button");let f=!1,L=0,x,m=[],l,y;E.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(E),n=t.get("speed"),o=t.get("mode");h.classList.add("hidden"),D(parseInt(n,10),o)});function D(e,t){l=e,y=t,T.classList.toggle("hidden"),window.addEventListener("keydown",k),window.addEventListener("resize",b),x=window.requestAnimationFrame(n=>G(n,t))}function V(){f=!1,m=[],_(),Y(),P(),window.removeEventListener("keydown",k),window.removeEventListener("resize",b),window.cancelAnimationFrame(x)}function ee(e,t=[]){var n;const o=d.querySelector(".selected-speed > .game-detail-info"),r=d.querySelector(".selected-difficulty > .game-detail-info"),c=d.querySelector(".apples-eaten > .game-detail-info");l===10?o.innerText="Easy":l===15?o.innerText="Medium":l===20&&(o.innerText="Difficult"),e==="easy"?r.innerText="Easy":e==="difficult"&&(r.innerText="Difficult"),c.innerText=((n=t.length)!==null&&n!==void 0?n:0).toString(),A.addEventListener("click",I),F.addEventListener("click",O),M.replaceChildren(),T.classList.toggle("hidden"),d.classList.toggle("hidden")}function C(){const e=d.querySelector(".selected-speed > .game-detail-info"),t=d.querySelector(".selected-difficulty > .game-detail-info"),n=d.querySelector(".apples-eaten > .game-detail-info");e.innerText="",t.innerText="",n.innerText="",A.removeEventListener("click",I),F.removeEventListener("click",O),d.classList.toggle("hidden")}function I(){C(),h.classList.remove("hidden")}function O(){C(),h.classList.add("hidden"),D(l,y)}function G(e,t){if(f){ee(t,m),V();return}x=window.requestAnimationFrame(o=>G(o,t)),!((e-L)/1e3<1/l)&&(L=e,Z(m,t),ne(),J(M),te())}function te(){y==="easy"?f=v():y==="difficult"&&(f=z(q())||v())}function ne(){Q.innerHTML=`Score: ${m.length}`}
